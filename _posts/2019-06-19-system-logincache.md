---
layout: post
title: "一种基于redis的登录态的设计与实现"
description: ""
category: [系统设计]
tags: [系统设计]
---
<link rel="stylesheet" href="{{ site.baseurl }}/css/pygments.css">

## 1.前言

<br>

&#160; &#160; &#160; &#160;本文浅析一种可行的、实现简单的登录态方案。登录态几乎是所有系统都要考虑的问题，旨在维护用户登录之后的状态。
“用户登录”这个功能已经发展很多年了，伴随着“用户登录”的演进，登录态的实现也在不断完善。从最简单的在url后加一个参数作为标记，到现在大型站点的SSO，
登录态方案从单应用单机到多应用集群，不断满足不同架构的需求，也不断满足安全方面的需求。

&#160; &#160; &#160; &#160;由于用户登录功能和登录态涉及的面非常广，比如密码的传输和存储、session共享、SSO、网络安全、第三方授权登录等，笔者见识尚浅，无法进行全面分析，
故本文仅就“登录态在服务器端的维护”一点进行阐述，上述方面不在本文讨论范围之内。

<br>

{:.center}
![login cache]({{ site.baseurl }}/images/post_2019_06_19_image1.jpg){:height="60%" width="60%"}

<br>

<!-- more -->

## 2.功能点

<br>

* 维持状态

&#160; &#160; &#160; &#160;这是登录态最基本的功能。

* 时效

&#160; &#160; &#160; &#160;登录态需要有时效，不能无限期处于登录状态中。

* 安全

&#160; &#160; &#160; &#160;登录态需要防止伪造或窃取。

* 互斥

&#160; &#160; &#160; &#160;登录态需要在同类型客户端中实现互斥登录，比如pc上只能允许最后一次登录有效，app类似，但是pc和app的登录不能互相影响，做到隔离。

* 强制失效

&#160; &#160; &#160; &#160;用户修改密码，或者找回密码，需要强制所有客户端的登录态失效。

<br>

## 3.实现

&#160; &#160; &#160; &#160;此处仅给出基本方案，以及重要部分的代码实现。方案的最优化应与具体业务挂钩，故不讨论最优解，不追求完美。

#### a) 维持状态

想要维持状态，客户端请求必须带上sessionId。可以是在

<br>

## 5.参考文献

[1] 陈皓.[你会做WEB上的用户登录功能吗？](https://coolshell.cn/articles/5353.html)[EB/OL].https://coolshell.cn/articles/5353.html，2019-06-19.<br>
[2] [浅析java中的语法糖](https://www.cnblogs.com/qingshanli/p/9375040.html)[EB/OL].https://www.cnblogs.com/qingshanli/p/9375040.html，2019-06-18.<br>