I"Œ<link rel="stylesheet" href="/css/pygments.css" />

<p><a href="http://tutorials.jenkov.com/java-io/randomaccessfile.html">åŸæ–‡é“¾æ¥</a> ä½œè€…: Jakob Jenkov</p>

<p>ã€€ã€€RandomAccessFileå…è®¸ä½ æ¥å›è¯»å†™æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æ–‡ä»¶ä¸­çš„æŸäº›éƒ¨åˆ†ã€‚FileInputStreamå’ŒFileOutputStreamæ²¡æœ‰è¿™æ ·çš„åŠŸèƒ½ã€‚</p>

<p>#åˆ›å»ºä¸€ä¸ªRandomAccessFile</p>

<p>ã€€ã€€åœ¨ä½¿ç”¨RandomAccessFileä¹‹å‰ï¼Œå¿…é¡»åˆå§‹åŒ–å®ƒã€‚è¿™æ˜¯ä¾‹å­ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 

<span class="nc">RandomAccessFile</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RandomAccessFile</span><span class="o">(</span><span class="s">"c:\\data\\file.txt"</span><span class="o">,</span> <span class="s">"rw"</span><span class="o">);</span>

    </code></pre></figure>

<p>ã€€ã€€è¯·æ³¨æ„æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šâ€œrwâ€ï¼Œè¡¨æ˜ä½ ä»¥è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚è¯·æŸ¥é˜…Javaæ–‡æ¡£è·çŸ¥ä½ éœ€è¦ä»¥ä½•ç§æ–¹å¼æ„é€ RandomAccessFileã€‚</p>

<!-- more -->

<p>#åœ¨RandomAccessFileä¸­æ¥å›è¯»å†™</p>

<p>ã€€ã€€åœ¨RandomAccessFileçš„æŸä¸ªä½ç½®è¯»å†™ä¹‹å‰ï¼Œå¿…é¡»æŠŠæ–‡ä»¶æŒ‡é’ˆæŒ‡å‘è¯¥ä½ç½®ã€‚é€šè¿‡seek()æ–¹æ³•å¯ä»¥è¾¾åˆ°è¿™ä¸€ç›®æ ‡ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨getFilePointer()è·å¾—å½“å‰æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 

<span class="nc">RandomAccessFile</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RandomAccessFile</span><span class="o">(</span><span class="s">"c:\\data\\file.txt"</span><span class="o">,</span> <span class="s">"rw"</span><span class="o">);</span>

<span class="n">file</span><span class="o">.</span><span class="na">seek</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>

<span class="kt">long</span> <span class="n">pointer</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getFilePointer</span><span class="o">();</span>

<span class="n">file</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    </code></pre></figure>

<p>#è¯»å–RandomAccessFile</p>

<p>ã€€ã€€RandomAccessFileä¸­çš„ä»»ä½•ä¸€ä¸ªread()æ–¹æ³•éƒ½å¯ä»¥è¯»å–RandomAccessFileçš„æ•°æ®ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 

<span class="nc">RandomAccessFile</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RandomAccessFile</span><span class="o">(</span><span class="s">"c:\\data\\file.txt"</span><span class="o">,</span> <span class="s">"rw"</span><span class="o">);</span>

<span class="kt">int</span> <span class="n">aByte</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>

<span class="n">file</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    </code></pre></figure>

<p>#å†™å…¥RandomAccessFile</p>

<p>ã€€ã€€RandomAccessFileä¸­çš„ä»»ä½•ä¸€ä¸ªwrite()æ–¹æ³•éƒ½å¯ä»¥å¾€RandomAccessFileä¸­å†™å…¥æ•°æ®ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 

<span class="nc">RandomAccessFile</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RandomAccessFile</span><span class="o">(</span><span class="s">"c:\\data\\file.txt"</span><span class="o">,</span> <span class="s">"rw"</span><span class="o">);</span>

<span class="n">file</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>

<span class="n">file</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    </code></pre></figure>

<p>ã€€ã€€ä¸read()æ–¹æ³•ç±»ä¼¼ï¼Œwrite()æ–¹æ³•åœ¨è°ƒç”¨ç»“æŸä¹‹åè‡ªåŠ¨ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦é¢‘ç¹åœ°æŠŠæŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå°†è¦å†™å…¥æ•°æ®çš„ä½ç½®ã€‚</p>

<p>#RandomAccessFileå¼‚å¸¸å¤„ç†</p>

<p>ã€€ã€€ä¸ºäº†æœ¬ç¯‡å†…å®¹æ¸…æ™°ï¼Œæš‚æ—¶å¿½ç•¥RandomAccessFileå¼‚å¸¸å¤„ç†çš„å†…å®¹ã€‚RandomAccessFileä¸å…¶ä»–æµä¸€æ ·ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•ä¹‹åå¿…é¡»å…³é—­ã€‚æƒ³è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ<a href="http://leesir.github.io/2015/10/java-io-exception">Java IOå¼‚å¸¸å¤„ç†</a>ã€‚</p>
:ET