I"¾.<link rel="stylesheet" href="/css/pygments.css" />

<p>Â  Â  Â  Â åœ¨è°ˆæ–­è¨€ä¹‹å‰ï¼Œå¿…é¡»è¦è°ˆè°ˆ2ç§ç¼–ç¨‹æ–¹å¼ï¼šé˜²å¾¡æ€§ç¼–ç¨‹ä¸å¥‘çº¦å¼ç¼–ç¨‹ã€‚é˜²å¾¡æ€§ç¼–ç¨‹æ¥è‡ªäºã€Šä»£ç å¤§å…¨ã€‹ï¼Œå¥‘çº¦å¼ç¼–ç¨‹ç”±ä¼¯ç‰¹å…°Â·è¿ˆè€¶äº1986å¹´æå‡ºã€‚</p>

<p>Â  Â  Â  Â é˜²å¾¡æ€§ç¼–ç¨‹å¼ºè°ƒä¸ä¿¡ä»»å¤–éƒ¨è¾“å…¥çš„å‚æ•°ï¼Œè¦å¯¹æ‰€æœ‰å¯èƒ½å‡ºç°é—®é¢˜çš„æ•°æ®åŠ ä»¥åˆ¤æ–­ï¼Œè¿™ç§ç¼–ç¨‹æ–¹å¼çš„ä»£ç ä¸­ï¼Œé€šå¸¸å­˜åœ¨å¤§é‡é‡å¤çš„ifè¯­å¥ã€‚</p>

<p>Â  Â  Â  Â å¥‘çº¦å¼ç¼–ç¨‹å¼ºè°ƒç³»ç»Ÿå†…å„ç»„ä»¶å¿…é¡»æŒ‰è§„å®šå®ç°å„è‡ªçš„é€»è¾‘ï¼Œåœ¨ç»„ä»¶äº¤äº’çš„è¿‡ç¨‹ä¸­ä¸å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœå‘ç°å‚æ•°ä¸ç¬¦åˆè¦æ±‚ï¼Œç¨‹åºå°†ç«‹å³ç»ˆæ­¢æ‰§è¡Œã€‚
ç°ä»£ç¼–ç¨‹è¯­è¨€é€šè¿‡æ–­è¨€çš„æœºåˆ¶å®ç°å¥‘çº¦å¼ç¼–ç¨‹ï¼Œè¿™ç§ç¼–ç¨‹æ–¹å¼çš„ä»£ç æ¯”è¾ƒç®€æ´ã€‚</p>

<p>Â  Â  Â  Â ç„¶è€Œåœ¨ç°ä»Šçš„è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯èƒ½å®ç°å¥‘çº¦å¼ç¼–ç¨‹ï¼šäººå‘˜æµåŠ¨å¤§ã€ä¸æ„¿æ„å†™æ–‡æ¡£ã€ä¸æ„¿æ„çœ‹æ–‡æ¡£ã€éœ€æ±‚è¿­ä»£å¿«ã€‚
å½“ç„¶é˜²å¾¡æ€§ç¼–ç¨‹ä¹Ÿåšçš„ä¸å¥½ï¼Œå¦åˆ™å°±ä¸ä¼šç”±bugäº†ã€‚ç”šè‡³æœ‰æ—¶å€™æŸç§åšæ³•å±äºé˜²å¾¡æ€§ç¼–ç¨‹è¿˜æ˜¯å¥‘çº¦å¼ç¼–ç¨‹éƒ½ä¸æ¸…æ™°ï¼Œæ¯”å¦‚ä½¿ç”¨æ³¨è§£å¼å‚æ•°æ ¡éªŒæ¡†æ¶ï¼Œçœ‹ä¼¼å±äºå¥‘çº¦å¼ç¼–ç¨‹ï¼šä»£ç ç®€æ´ã€å¿«é€Ÿå¤±æ•ˆã€‚
è€Œå½“åç¼–è¯‘è¿‡åï¼Œå®åˆ™å¤§é‡åŸºç¡€ifåˆ¤æ–­ã€‚</p>

<p>Â  Â  Â  Â é˜²å¾¡æ€§ç¼–ç¨‹ä¸å¥‘çº¦å¼ç¼–ç¨‹æ€æƒ³çš„å‡ºç°ï¼Œéƒ½ç®—çš„ä¸Šæ˜¯è½¯ä»¶å¼€å‘æ€æƒ³çš„è¿›æ­¥ï¼Œè€Œå—åˆ¶äºå½“æ—¶çš„çŸ¥è¯†èƒŒæ™¯ï¼Œéš¾å…åœ¨ä»Šå¤©ç•¥æ˜¾è¿‡æ—¶ã€‚å°±æ­¤ç»“æŸè®¨è®ºï¼Œè¿›å…¥æ­£é¢˜ã€‚</p>

<!-- more -->

<p>Â  Â  Â  Â æ–­è¨€å…³é”®å­—è‡ªJDK 1.4å¼•å…¥ï¼Œä¸‹é¢æ˜¯Oracleå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼š</p>

<blockquote>
  <p>Â  Â  Â  Â An assertion is a statement in the JavaTM programming language that enables you to test your assumptions about your program. For example, if you write a method that calculates the speed of a particle, you might assert that the calculated speed is less than the speed of light.</p>

  <p>Â  Â  Â  Â Each assertion contains a boolean expression that you believe will be true when the assertion executes. If it is not true, the system will throw an error. By verifying that the boolean expression is indeed true, the assertion confirms your assumptions about the behavior of your program, increasing your confidence that the program is free of errors.</p>

  <p>Â  Â  Â  Â Experience has shown that writing assertions while programming is one of the quickest and most effective ways to detect and correct bugs. As an added benefit, assertions serve to document the inner workings of your program, enhancing maintainability.</p>
</blockquote>

<p>Â  Â  Â  Â é™¤äº†åœ¨<a href="http://leesir.github.io/2019/06/java-javasuger">Javaè¯­æ³•ç³–</a>è¿™ç¯‡ä¸­ä»‹ç»çš„æ–­è¨€çš„ç”¨æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªå·®åˆ«ä¸å¤§ä½†æ˜¯å¯ä»¥è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯çš„ç”¨æ³•ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="k">assert</span> <span class="nc">Expression1</span> <span class="o">:</span> <span class="nc">Expression2</span> <span class="o">;</span></code></pre></figure>

<p>Â  Â  Â  Â å…¶ä¸­ï¼ŒExpression1æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ã€‚Expression2æ˜¯ä¸€ä¸ªå€¼æˆ–è€…æ˜¯ä¸€ä¸ªæœ‰è¿”å›å€¼çš„æ–¹æ³•è°ƒç”¨ï¼Œå°†ä½œä¸ºAssertionErrorçš„é”™è¯¯ä¿¡æ¯æç¤ºå‡ºæ¥ã€‚</p>

<p>Â  Â  Â  Â å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">assertcode</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestAssertByteCode</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">assert1</span><span class="o">();</span>
        <span class="n">assert2</span><span class="o">();</span>
        <span class="n">assert3</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="cm">/**
     * æµ‹è¯•æ–­è¨€assert Expression1;
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">assert1</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">assert1</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">assert1</span><span class="o">++;</span>
        <span class="k">assert</span> <span class="n">assert1</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * æµ‹è¯•assert Expression1 : Expression2;
     * Expression2ä¸ºæ™®é€šå€¼
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">assert2</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">assert2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">assert2</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">:</span> <span class="s">"assert2"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * æµ‹è¯•assert Expression1 : Expression2;
     * Expression2ä¸ºæ–¹æ³•è°ƒç”¨
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">assert3</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">assert3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">assert3</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">getAssert3ErrorMsg</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getAssert3ErrorMsg</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">3</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Â  Â  Â  Â assert1ã€assert2ã€assert3æ–­è¨€æ£€æŸ¥å¤±è´¥ï¼Œè¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//assert1</span>
<span class="nc">Exception</span> <span class="n">in</span> <span class="n">thread</span> <span class="s">"main"</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">AssertionError</span>
	<span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">assert1</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">19</span><span class="o">)</span>
	<span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">main</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">8</span><span class="o">)</span>

<span class="c1">//assert2</span>
<span class="nc">Exception</span> <span class="n">in</span> <span class="n">thread</span> <span class="s">"main"</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">AssertionError</span><span class="o">:</span> <span class="n">assert2</span>
	<span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">assert2</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">21</span><span class="o">)</span>
	<span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">main</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">9</span><span class="o">)</span>

<span class="c1">//assert3</span>
<span class="nc">Exception</span> <span class="n">in</span> <span class="n">thread</span> <span class="s">"main"</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">AssertionError</span><span class="o">:</span> <span class="mi">3</span>
    <span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">assert2</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">21</span><span class="o">)</span>
    <span class="n">at</span> <span class="n">assertcode</span><span class="o">.</span><span class="na">TestAssertByteCode</span><span class="o">.</span><span class="na">main</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">java</span><span class="o">:</span><span class="mi">9</span><span class="o">)</span></code></pre></figure>

<p>Â  Â  Â  Â åç¼–è¯‘åçš„ä»£ç ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä»¥assert3ä¸ºä¾‹åç¼–è¯‘ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">assert3</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">assert3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">nextInt</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">$assertionsDisabled</span> <span class="o">&amp;&amp;</span> <span class="n">assert3</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">AssertionError</span><span class="o">(</span><span class="nc">TestAssertByteCode</span><span class="o">.</span><span class="na">getAssert3ErrorMsg</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>Â  Â  Â  Â ç›®å‰ä¸»æµIDEå’Œå„å…¬å¸ç”Ÿäº§ç¯å¢ƒçš„å¯åŠ¨å‘½ä»¤ï¼Œéƒ½ä¸ä¼šé»˜è®¤å°†æ–­è¨€åŠŸèƒ½å¼€å¯ã€‚
å³ä½¿è¯¸å¤šçŸ¥ä¹å¤§ç‰›åŠoracleå®˜ç½‘æ•™ç¨‹ï¼Œéƒ½å¯¹â€æ–­è¨€çš„ä»·å€¼â€å’Œâ€æ–­è¨€çš„ç”¨æ³•â€è¿›è¡Œäº†å¤§ç¯‡å¹…çš„è®²è¿°ï¼Œä¸è¿‡ç¬”è€…ä¾ç„¶ä¸å»ºè®®ä½¿ç”¨assertï¼Œassertçš„é”™è¯¯æ—¢ä¸æ–¹ä¾¿è®°å½•æ—¥å¿—ï¼Œä¹Ÿä¸å¤Ÿå‹å¥½ã€‚</p>

<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>

<p>[1] <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html">Programming With Assertions</a>[EB/OL].https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.htmlï¼Œ2019-06-21.<br /></p>
:ET