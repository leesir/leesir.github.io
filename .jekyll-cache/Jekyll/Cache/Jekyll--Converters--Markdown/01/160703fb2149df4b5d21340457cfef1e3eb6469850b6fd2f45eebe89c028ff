I"ìK<link rel="stylesheet" href="/css/pygments.css" />

<p><a href="http://www.javacodegeeks.com/2012/05/functional-style-in-java-with.html">åŸæ–‡é“¾æ¥</a> ä½œè€…: <a href="http://www.javacodegeeks.com/author/Cyrille-Martraire/">Cyrille Martraire</a></p>

<p>ã€€ã€€ä½ ä¸€ç›´åœ¨å¬è¯´å‡½æ•°å¼ç¼–ç¨‹å°†ç§°éœ¸æ•´ä¸ªç¼–ç¨‹å±Šï¼Œè€Œè‡ªå·±ä»ç„¶æ²‰æµ¸åœ¨æ™®é€šçš„Javaé‡Œï¼Ÿè¯·ä¸è¦æ‹…å¿ƒï¼Œå› ä¸ºä½ å·²ç»åœ¨æ—¥å¸¸Javaä»£ç ä¸­åŠ å…¥äº†å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ã€‚æ­¤å¤–ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¾ˆæœ‰è¶£ï¼Œèƒ½å¤Ÿå¸®ä½ èŠ‚çœå¤šè¡Œä»£ç å¹¶ä¸”é™ä½é”™è¯¯ç‡ã€‚</p>

<p>#ä»€ä¹ˆæ˜¯è°“è¯å‡½æ•°ï¼Ÿ</p>

<p>ã€€ã€€è®¸ä¹…ä¹‹å‰ï¼Œé‚£æ—¶æˆ‘è¿˜åœ¨ç”¨Java 1.4è¿›è¡Œç¼–ç ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡å‘ç°Apache Commons Collectionsï¼Œä¾¿çˆ±ä¸Šäº†è°“è¯å‡½æ•°ã€‚Apache Commons Collectionsé‡Œçš„è°“è¯å‡½æ•°ä»…ä»…åªæ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="n">evaluate</span><span class="o">(</span><span class="nc">Object</span> <span class="n">object</span><span class="o">):</span> <span class="kt">boolean</span>
    </code></pre></figure>

<p>ã€€ã€€è¿™å°±æ˜¯è°“è¯å‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›trueæˆ–è€…falseã€‚æœ€è¿‘è¯ç”Ÿäº†ç±»ä¼¼Apache Commons Collectionsçš„æŒæœ‰Apache 2.0è®¸å¯çš„Google Guavaã€‚åœ¨Google Guavaä¸­ï¼Œå®šä¹‰äº†Predicateæ¥å£ï¼Œè¯¥æ¥å£åŒ…å«ä¸€ä¸ªå¸¦æœ‰æ³›å‹å‚æ•°çš„æ–¹æ³•ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="n">apply</span><span class="o">(</span><span class="no">T</span> <span class="n">input</span><span class="o">):</span> <span class="kt">boolean</span>
    </code></pre></figure>

<p>ã€€ã€€å¦‚æœæƒ³åœ¨ç¨‹åºä¸­ä½¿ç”¨è°“è¯å‡½æ•°ï¼Œåªéœ€è¦åˆ©ç”¨è‡ªå·±çš„é€»è¾‘å®ç°è¯¥æ¥å£å³å¯ã€‚</p>

<!-- more -->

<p>#ä¸€ä¸ªç®€å•çš„ä¾‹å­</p>

<p>ã€€ã€€å…ˆä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªè®¢å•åˆ—è¡¨ï¼Œæ¯ä¸ªè®¢å•ç”¨PurchaseOrderè¡¨ç¤ºï¼ŒPurchaseOrderä¸­åŒ…å«æ—¥æœŸï¼Œé¡¾å®¢å’ŒçŠ¶æ€ã€‚ä¸åŒçš„ç”¨ä¾‹ä¼šè¦æ±‚ä½ æœ‰ä¸åŒçš„è¾“å‡ºï¼Œæ¯”å¦‚è·å–æŸä¸ªé¡¾å®¢æ‰€æœ‰ã€ç­‰å¾…å‘è´§ã€å·²å‘è´§ã€å·²äº¤ä»˜æˆ–è€…è¿‡å»ä¸€ä¸ªå°æ—¶å†…å®Œæˆçš„è®¢å•ã€‚å½“ç„¶ä½ å¯ä»¥åœ¨å¾ªç¯ä¸­ä½¿ç”¨ifåˆ¤æ–­å®ç°è¿™äº›åŠŸèƒ½ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="c1">//List&lt;PurchaseOrder&gt; orders...</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="nf">listOrdersByCustomer</span><span class="o">(</span><span class="nc">Customer</span> <span class="n">customer</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">selection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">PurchaseOrder</span> <span class="n">order</span> <span class="o">:</span> <span class="n">orders</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">order</span><span class="o">.</span><span class="na">getCustomer</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">customer</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">selection</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">selection</span><span class="o">;</span>
<span class="o">}</span>
    </code></pre></figure>

<p>ã€€ã€€ä»¥ä¸Šæ˜¯è·å–æŸä¸ªé¡¾å®¢æ‰€æœ‰è®¢å•çš„ä»£ç ã€‚ä¸åŒçš„åŠŸèƒ½éœ€è¦ç¼–å†™å¤šä¸ªç±»ä¼¼çš„å¾ªç¯ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="nf">listRecentOrders</span><span class="o">(</span><span class="nc">Date</span> <span class="n">fromDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">selection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">PurchaseOrder</span> <span class="n">order</span> <span class="o">:</span> <span class="n">orders</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">order</span><span class="o">.</span><span class="na">getDate</span><span class="o">().</span><span class="na">after</span><span class="o">(</span><span class="n">fromDate</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">selection</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">selection</span><span class="o">;</span>
<span class="o">}</span>
    </code></pre></figure>

<p>ã€€ã€€è¿™äº›é‡å¤ä»£ç éå¸¸æ˜æ˜¾ï¼šé™¤äº†ifçš„åˆ¤æ–­æ¡ä»¶ä¹‹å¤–æ²¡æœ‰ä»»ä½•å·®å¼‚ï¼ˆè¯‘è€…æ³¨ï¼šæ–¹æ³•å‚æ•°å¯å½’ä¸ºåˆ¤æ–­æ¡ä»¶ï¼‰ã€‚é‡‡ç”¨è°“è¯å‡½æ•°çš„æ€æƒ³åœ¨äºï¼Œåˆ©ç”¨ä¼ å…¥åˆ°å‡½æ•°å†…çš„è°“è¯çš„è°ƒç”¨æ›¿ä»£ifè¯­å¥å—é‡Œçš„ç¡¬ç¼–ç çš„åˆ¤æ–­æ¡ä»¶ã€‚è¿™æ„å‘³ç€ï¼Œä½ åªéœ€ç¼–å†™ä¸€éå¸¦æœ‰è°“è¯å‡½æ•°ä½œä¸ºå‚æ•°çš„æ–¹æ³•ï¼Œå°±å¯ä»¥è¦†ç›–æ‰€æœ‰çš„ç”šè‡³ä½ è¿˜ä¸çŸ¥é“çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="nf">listOrders</span><span class="o">(</span><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">selection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">PurchaseOrder</span> <span class="n">order</span> <span class="o">:</span> <span class="n">orders</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">condition</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">order</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">selection</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">selection</span><span class="o">;</span>
<span class="o">}</span>
    </code></pre></figure>

<p>ã€€ã€€å¦‚æœéœ€è¦è€ƒè™‘åˆ°å¤ç”¨ï¼Œå¯ä»¥æŠŠè°“è¯å‡½æ•°å£°æ˜æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œå¦åˆ™å¯ä»¥æŠŠè°“è¯å£°æ˜æˆåŒ¿åç±»ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="kd">final</span> <span class="nc">Customer</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Customer</span><span class="o">(</span><span class="s">"BruceWaineCorp"</span><span class="o">);</span>
<span class="kd">final</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">condition</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">PurchaseOrder</span> <span class="n">order</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">order</span><span class="o">.</span><span class="na">getCustomer</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">customer</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">};</span>
    </code></pre></figure>

<p>ã€€ã€€å¦‚æœä½ çš„ä½¿ç”¨è¿‡çœŸæ­£æ„ä¹‰ä¸Šçš„å‡½æ•°å¼è¯­è¨€ï¼ˆScala, Clojure, Haskellç­‰ï¼‰çš„æœ‹å‹çœ‹åˆ°è¿™äº›ä»£ç ï¼Œå¯èƒ½ä¼šè§‰å¾—åœ¨å¤„ç†é€šç”¨åŠŸèƒ½æ—¶ä»£ç æ˜¾å¾—éå¸¸å†—ä½™ã€‚ç„¶è€Œæˆ‘ä»¬å·²ç»ä¹ æƒ¯äºJavaå†—é•¿çš„è¯­æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬æœ‰å¼ºå¤§çš„å·¥å…·ï¼ˆè‡ªåŠ¨è¡¥é½ã€é‡æ„ï¼‰å¸®åŠ©æˆ‘ä»¬é€‚åº”å®ƒï¼Œè¿™ä½¿å¾—æˆ‘ä»¬çš„Javaé¡¹ç›®æ— æ³•ä¸€å¤œä¹‹é—´è½¬å˜æˆå…¶ä»–è¯­è¨€çš„é¡¹ç›®ã€‚</p>

<p>#è°“è¯å‡½æ•°æ˜¯é›†åˆç±»çš„å¥½æœ‹å‹</p>

<p>ã€€ã€€å›åˆ°ä¹‹å‰çš„ä¾‹å­ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªè¦†ç›–äº†æ‰€æœ‰ç”¨ä¾‹çš„å¾ªç¯ï¼Œæˆ‘ä»¬ä¸ºå…±æ€§çš„æŠ½ç¦»æ„Ÿåˆ°å¼€å¿ƒï¼Œä½†æ˜¯ä½ çš„æœ‹å‹ä¾ç„¶ä¼šå˜²ç¬‘ä½ ã€‚å¹¸è¿çš„æ˜¯ï¼ŒApacheæˆ–è€…Googleçš„APIéƒ½æä¾›äº†ä½ æƒ³è¦çš„ä¸œè¥¿ï¼Œè¿˜ç‰¹åˆ«æä¾›äº†ä¸€ä¸ªç±»ä¼¼java.util.Collectionsçš„å‘½åä¸ºCollections2çš„ç±»ï¼ˆåå­—ä¸æ˜¯å¾ˆæ–°é¢–ï¼‰ã€‚</p>

<p>ã€€ã€€è¿™ä¸ªç±»æä¾›ç»™äº†ä¸æˆ‘ä»¬å…ˆå‰ç¼–å†™çš„ä»£ç åŠŸèƒ½ç±»ä¼¼çš„filter()å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠæ–¹æ³•é‡æ„æˆæ— å¾ªç¯çš„ç‰ˆæœ¬ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="kd">public</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="nf">selectOrders</span><span class="o">(</span><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">Collections2</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">orders</span><span class="o">,</span> <span class="n">condition</span><span class="o">);</span>
<span class="o">}</span>
    </code></pre></figure>

<p>ã€€ã€€å®é™…ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªè¿‡æ»¤åçš„è§†å›¾ï¼š</p>

<p>ã€€ã€€è¿”å›çš„é›†åˆæ˜¯æœªç»è¿‡æ»¤çš„é›†åˆï¼ˆè¾“å…¥çš„é›†åˆï¼‰çš„çœŸå®ç¼©å½±ï¼ˆè¯‘è€…æ³¨ï¼šå…ˆå‰ç‰ˆæœ¬çš„å‡½æ•°è¿”å›çš„é›†åˆæ˜¯è¾“å…¥é›†åˆçš„ä¸€ä¸ªå­é›†çš„æ‹·è´ï¼‰ï¼Œæ›´æ”¹å…¶ä¸­ä¸€ä¸ªé›†åˆä¼šå½±å“å¦ä¸€ä¸ªé›†åˆã€‚</p>

<p>ã€€ã€€è¿™æ„å‘³ç€è¿™ç§æ–¹å¼å°†ä½¿ç”¨æ›´å°‘çš„å†…å­˜ï¼Œå› ä¸ºä¸ä¼šæŠŠåŸå§‹é›†åˆçš„å†…å®¹æ‹·è´åˆ°è¿”å›çš„é›†åˆä¸­ã€‚</p>

<p>ã€€ã€€åœ¨ä¸€ä¸ªç±»ä¼¼çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¦æ±‚è¿”å›åœ¨ç»™å®šçš„è¿­ä»£å™¨ä¹‹ä¸Šè¿‡æ»¤å¥½çš„åªç¬¦åˆè°“è¯å‡½æ•°çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼ˆè£…é¥°æ¨¡å¼ï¼‰ã€‚</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="nc">Iterator</span> <span class="n">filteredIterator</span> <span class="o">=</span> <span class="nc">Iterators</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">unfilteredIterator</span><span class="o">,</span> <span class="n">condition</span><span class="o">);</span>
    </code></pre></figure>

<p>ã€€ã€€ä»Java 5å¼€å§‹ï¼ŒIterableæ¥å£å’Œå¾ªç¯ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨ä»¥ä¸‹å†™æ³•ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="kd">public</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="nf">selectOrders</span><span class="o">(</span><span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">PurchaseOrder</span><span class="o">&gt;</span> <span class="n">condition</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">Iterables</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">orders</span><span class="o">,</span> <span class="n">condition</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// you can directly use it in a foreach loop, and it reads well:</span>
<span class="k">for</span> <span class="o">(</span><span class="nc">PurchaseOrder</span> <span class="n">order</span> <span class="o">:</span> <span class="n">orders</span><span class="o">.</span><span class="na">selectOrders</span><span class="o">(</span><span class="n">condition</span><span class="o">))</span> <span class="o">{</span>
    <span class="c1">//...</span>
<span class="o">}</span>
    </code></pre></figure>

<p>#ç°æˆçš„è°“è¯å‡½æ•°</p>

<p>ã€€ã€€ä¸ºäº†ä½¿ç”¨è°“è¯ï¼Œæˆ‘ä»¬å¿…é¡»å£°æ˜è‡ªå·±çš„è°“è¯æ¥å£ï¼Œæˆ–è€…ä¸ºåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨åˆ°çš„è°“è¯å‚æ•°éƒ½å£°æ˜ä¸€ä¸ªç±»ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œç„¶è€Œä»ç±»ä¼¼Guavaä»¥åŠCommonsçš„APIä¸­ä½¿ç”¨æ ‡å‡†è°“è¯æ¥å£çš„å¥½å¤„æ˜¯ï¼šä½ å¯ä»¥ç»“åˆè¿™ç±»APIæä¾›çš„å¤§é‡ä¼˜ç§€ç»„ä»¶å®ç°ä½ è‡ªå·±çš„è°“è¯å‡½æ•°ã€‚</p>

<p>ã€€ã€€å¦‚æœä½ éœ€è¦çš„æ˜¯åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºç©ºæˆ–è€…ä¸ä¸ºç©ºçš„æ¡ä»¶ï¼Œä½ ä¸éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªè°“è¯å‡½æ•°ï¼Œåªéœ€è¦ä½¿ç”¨ç°æˆçš„è°“è¯å°±å¯ä»¥äº†ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="c1">// gives you a predicate that checks if an integer is zeroPredicate</span>
<span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">isZero</span> <span class="o">=</span> <span class="nc">Predicates</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="c1">// gives a predicate that checks for non null objects</span>
<span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">isNotNull</span> <span class="o">=</span> <span class="nc">Predicates</span><span class="o">.</span><span class="na">notNull</span><span class="o">();</span>
<span class="c1">// gives a predicate that checks for objects that are instanceof the given Class</span>
<span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">isString</span> <span class="o">=</span> <span class="nc">Predicates</span><span class="o">.</span><span class="na">instanceOf</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    </code></pre></figure>

<p>ã€€ã€€å¯¹äºç»™å®šçš„è°“è¯ï¼Œä½ å¯ä»¥åè½¬å®ƒï¼ˆè¿”å›ç›¸åçš„è¿”å›å€¼ï¼Œæ¯”å¦‚trueå˜æˆfalseï¼‰ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="nc">Predicates</span><span class="o">.</span><span class="na">not</span><span class="o">(</span><span class="n">predicate</span><span class="o">);</span>
    </code></pre></figure>

<p>ã€€ã€€åˆ©ç”¨ANDï¼ŒORæ“ä½œç»“åˆå¤šä¸ªè°“è¯ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="nc">Predicates</span><span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">predicate1</span><span class="o">,</span> <span class="n">predicate2</span><span class="o">);</span>
<span class="nc">Predicates</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">predicate1</span><span class="o">,</span> <span class="n">predicate2</span><span class="o">);</span>
<span class="c1">// gives you a predicate that checks for either zero or null</span>
<span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">isNullOrZero</span> <span class="o">=</span> <span class="nc">Predicates</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">isZero</span><span class="o">,</span> <span class="nc">Predicates</span><span class="o">.</span><span class="na">isNull</span><span class="o">());</span>
    </code></pre></figure>

<p>ã€€ã€€å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‹¥æœ‰è¿”å›å›ºå®šå€¼ï¼ˆtrueæˆ–è€…falseï¼‰çš„ç‰¹æ®Šè°“è¯ï¼ˆè¯‘è€…æ³¨ï¼šåªè¿”å›trueå³ä¸ºé€»è¾‘å­¦ä¸­çš„æ°¸çœŸå¼ï¼Œåä¹‹ä¸ºæ°¸å‡å¼ï¼‰ã€‚è¿™äº›è°“è¯éå¸¸æœ‰ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¹‹åçš„ä¾‹å­ä¸­è¯æ˜ï¼š</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
<span class="nc">Predicates</span><span class="o">.</span><span class="na">alwaysTrue</span><span class="o">();</span>
<span class="nc">Predicates</span><span class="o">.</span><span class="na">alwaysFalse</span><span class="o">();</span>
    </code></pre></figure>

<p>#å¦‚ä½•å®šä½è°“è¯</p>

<p>ã€€ã€€èµ·å…ˆï¼Œæˆ‘ç»å¸¸ç¼–å†™åŒ¿åçš„è°“è¯ç±»ï¼Œåæ¥è¿™äº›è°“è¯æ€»æ˜¯é¢‘ç¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä¼šå°†åŒ¿åçš„è°“è¯å‡çº§æˆå®ä½“ç±»ã€å†…éƒ¨ç±»ç­‰ã€‚</p>

<p>ã€€ã€€é¡ºä¾¿æä¸€ä¸‹ï¼Œå¦‚ä½•å®šä½è°“è¯å‘¢ï¼Ÿè¯·å‚è€ƒRobert C. Martinçš„æ–‡ç«  <a href="http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf">Common Closure Principle (CCP)</a>ä¸­æåˆ°çš„ä¸€æ®µè¯ :</p>

<p>ã€€ã€€ä¸€èµ·å˜åŒ–çš„ç±»ï¼Œå±äºä¸€ä¸ªæ•´ä½“ã€‚</p>

<p>ã€€ã€€å› ä¸ºè°“è¯æ€»æ˜¯å¯¹ä¸€ä¸ªç‰¹å®šç±»å‹çš„å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œæˆ‘å–œæ¬¢å°†è°“è¯é‡æ–°å®šä½ä¸ºè°“è¯æ“ä½œçš„å‚æ•°çš„ç±»å‹ã€‚æ¯”å¦‚ï¼Œç±»CustomerOrderPredicateï¼ŒPendingOrderPredicate å’ŒRecentOrderPredicate åº”è¯¥è¢«é˜²æ­¢åœ¨åŒä¸€ä¸ªåŒ…ä¸‹æˆ–è€…å­åŒ…ä¸‹ï¼ˆå¦‚æœä½ æœ‰å¾ˆå¤šåŒ…ï¼‰ï¼Œè€Œä¸æ˜¯æŠŠä»£ç å†™åˆ°è¿™äº›è°“è¯æ‰€æ“ä½œçš„ä¸»ä½“PurchaseOrderé‡Œã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ï¼Œå°†è°“è¯å£°æ˜æˆå®ƒä»¬è¦æ“ä½œçš„ä¸»ä½“ç±»å‹çš„å†…éƒ¨ç±»ã€‚æ˜¾ç„¶ï¼Œè°“è¯ä¸ä¸»ä½“å¯¹è±¡æ˜¯éå¸¸è€¦åˆçš„ã€‚</p>

<p>#èµ„æº</p>

<p>ã€€ã€€è¿™é‡Œæœ‰æœ¬ç¯‡æ–‡ç« çš„ä¾‹å­æºä»£ç ï¼š<a href="http://cyrille.martraire.com/wp-content/uploads/2010/11/cyriux_predicates_part1.zip">cyriux_predicates_part1 (zip)</a></p>

<p>ã€€ã€€åœ¨ä¸‹ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬ç€é‡è§‚å¯Ÿè°“è¯å‡½æ•°å¦‚ä½•ç®€åŒ–æµ‹è¯•ã€è°“è¯å¦‚ä½•ä¸åŸŸé©±åŠ¨è®¾è®¡é‡Œçš„æ ‡å‡†ç›¸è”ç³»ï¼Œä»¥åŠä¸€äº›èƒ½è®©ä½ é«˜æ•ˆåˆ©ç”¨è°“è¯å‡½æ•°çš„é¢å¤–çŸ¥è¯†ã€‚</p>

<p>#å‚è€ƒæ–‡çŒ®</p>

<p><a href="http://cyrille.martraire.com/2010/11/a-touch-of-functional-style-in-plain-java-with-predicates-part-1/">A touch of functional style in plain Java with predicates â€“ Part 1</a> from our <a href="http://www.javacodegeeks.com/p/jcg.html">JCG partner</a> Cyrille Martraire at the <a href="http://cyrille.martraire.com/">Cyrille Martraireâ€™s blog</a></p>
:ET